## Стратегия обновления Blue/Green
Сине-зеленое развертывание kubernetes (иногда называемое красным/черным) предполагает развертывание новой версии вместе со старой. Внутренняя команда QA может тестировать новую версию (синий цвет), в то время как клиент продолжает получать доступ к старой версии (зеленый цвет). После тестирования и утверждения релиза трафик можно перенаправить на новую версию (синий цвет), изменив сервис Kubernetes. После этого, когда инженеры будут уверены в работоспособности релиза, старая версия (зеленая) может быть уменьшена до нуля.

![Kubernetes Deployments](./assets/k8s-deployments-blue-green.gif)
Эта стратегия также гарантирует отсутствие простоев в работе клиентов во время развертывания, а также дает бизнесу дополнительный уровень уверенности в новом сервисе (по результатам QA-тестирования). Синяя/зеленая стратегии предполагают больше инженерных работ и являются самыми затратными с точки зрения ресурсов (удвоение ресурсов приложения), однако при необходимости старые версии могут быть немедленно развернуты.

**Плюсы:**
- Мгновенное развертывание/откат.
- Отсутствие проблемы с версионностью, все состояние приложения изменяется за один раз.

**Минусы:**
- Дороговизна, поскольку требует удвоения ресурсов.
- Перед запуском в промышленную эксплуатацию необходимо провести надлежащее тестирование всей платформы.
- Работа с приложениями, имеющими состояние, может оказаться сложной.

## Стратегия обновления Canary
Канареечное развертывание заключается в постепенном переводе производственного трафика с версии А на версию В. Обычно трафик делится по весу. Например, 90% запросов поступает на версию A, 10% - на версию B.
Этот метод чаще всего используется в тех случаях, когда тесты недостаточны или ненадежны, а также если нет уверенности в стабильности нового релиза на платформе.

![Kubernetes Deployments](./assets/k8s-deployments-canary.gif)


**Плюсы:**
- Простота настройки.
- Постепенное распространение версий по всем экземплярам.
- Удобно для приложений с состоянием, которые обеспечивают перераспределение данных.

**Минусы:**
- Откат/переход может занимать время.
- Поддержка нескольких API затруднена.
- Отсутствие контроля над трафиком.


## Стратегия обновления A/B Testing
Канареечное развертывание заключается в постепенном переводе производственного трафика с версии А на версию В. Обычно трафик делится по весу. Например, 90% запросов поступает на версию A, 10% - на версию B.
Этот метод чаще всего используется в тех случаях, когда тесты недостаточны или ненадежны, а также если нет уверенности в стабильности нового релиза на платформе.

![Kubernetes Deployments](./assets/k8s-deployments-a-b.gif)


**Плюсы:**
- Простота настройки.
- Постепенное распространение версий по всем экземплярам.
- Удобно для приложений с состоянием, которые обеспечивают перераспределение данных.

**Минусы:**
- Откат/переход может занимать время.
- Поддержка нескольких API затруднена.
- Отсутствие контроля над трафиком.

## Стратегия обновления Shadow
Канареечное развертывание заключается в постепенном переводе производственного трафика с версии А на версию В. Обычно трафик делится по весу. Например, 90% запросов поступает на версию A, 10% - на версию B.
Этот метод чаще всего используется в тех случаях, когда тесты недостаточны или ненадежны, а также если нет уверенности в стабильности нового релиза на платформе.

![Kubernetes Deployments](./assets/k8s-deployments-shadow.gif)


**Плюсы:**
- Простота настройки.
- Постепенное распространение версий по всем экземплярам.
- Удобно для приложений с состоянием, которые обеспечивают перераспределение данных.

**Минусы:**
- Откат/переход может занимать время.
- Поддержка нескольких API затруднена.
- Отсутствие контроля над трафиком.
